## 一、网络模型分层

### 1. (中高频) OSI 七层模型是什么？每一层的作用是什么？

OSI七层模型是国际标准化组织提出的一个网络分层模型。

![img](https://cdn.nlark.com/yuque/0/2024/png/42782944/1711927753730-47d62806-b57e-4cf4-8a57-739e95bb8e7a.png)

### 2. (中高频) TCP/IP 四层模型是什么？每一层的作用是什么？（重要）

![img](https://cdn.nlark.com/yuque/0/2024/png/42782944/1719270182113-3f0b31d4-c5c5-4f4a-a991-81b02ca52b44.png)

***应用层***
专注于为用户提供**应用功能**，确定各种不同类型的网络应用所遵循的**通信规则和数据格式**，比如HTTP协议，FTP协议，DNS协议等。应用层传输单位一般叫**消息**或**报文**，当两个设备需要通信时，就把应用数据传给传输层。

***传输层***
应用层之下是传输层，应用层数据包传给传输层，传输层**为应用层提供网络支持**。传输层有两个常用的传输协议，分别是**TCP**和**UDP**。
TCP全称叫传输控制协议，它是面向连接的协议，提供可靠的传输服务，TCP还具有**流量控制，超时重传，拥塞控制等手段**。TCP的经典应用场景就是聊天软件发送消息。

UDP是无连接的，只负责发送数据包但不保证送达，所以实时性更好，传输效率更高。视频通话场景一般是UDP。

***网络层***
网络层**负责将数据从一个设备传输到另一个设备，为「分组交换网」上的不同主机提供通信服务**。 网络层最常用的是IP协议，IP协议会**将传输层的报文作为数据部分，再加上IP包头组装成IP报文**。

IP协议通过**寻址**和**路由**功能，将IP报文通过网关、路由器、交换机等网络设备把数据发送到对应的网络中。

***网络接口层***
网络接口层主要**为网络层提供「链路级别」传输的服务**，负责在**以太网、WiFi**这样的底层网络上发送原始数据包。网络接口层在**IP报文的前面加上MAC包头，并封装成数据帧发送到网络上**，数据帧在两个相邻节点间的链路上传送。每一帧包括数据和必要的控制信息（如同步信息，地址信息，差错控制等）。

![img](https://cdn.nlark.com/yuque/0/2024/png/42782944/1719270168634-34ca49e3-d23e-4cd5-bcd1-1bee90f21ce4.png)

### 3. 网络分层的原因？

1. **各层级之间是相互独立**，它**不需要关心别的层**如何实现，只需要知道如何调用下层提供好的功能。
2. **提高了整体灵活性****，**每一层可以使用最适合的技术来实现，只要保证提供的功能和暴露的接口规则没有被改变。
3. **简化问题**，可以将复杂的网络问题分解成小问题。

### 4. 子网掩码的作用？

子网掩码是一个32位的二进制数，主要是用来划分网络地址和主机地址。

### 5. TCP/IP各层都有哪些协议?

应用层：http，ftp，dns，rpc

传输层：tcp，udp

网络层：ip

网络接口层：

------

## 二、TCP

### 1. (高频) 三次握手过程？

1. **一次握手**:客户端发送带有`SYN(SEQ=x)`标志的数据包->服务端，然后客户端进入`SYN_SENT`状态，等待服务端的确认；
2. **二次握手**:服务端发送带有`SYN+ACK(SEQ=y,ACK=x+1)`标志的数据包->客户端,然后服务端进入`SYN_RECV`状态；
3. **三次握手**:客户端发送带有`ACK(ACK=y+1)`标志的数据包->服务端，然后客户端和服务端都进入`ESTABLISHED`状态，完成TCP三次握手。

### 2. (高频) 为什么不是两次握手？为什么不是四次握手？

*避免历史连接初始化 TCP 连接*

假如是两次握手，服务端在收到 SYN 报文后就会进入ESTABLISHED状态，意味着可以给客户端返回数据，而此时客户端还没有进入ESTABLISHED状态。如果通过客户端判断这是一次历史连接，则会发送RST报文来终止连接，服务端收到 RST 报文后才会终止连接。那么之前服务端发送的数据就白白发送了，造成了服务端资源浪费。

*同步初始序列号*

TCP 协议的通信双方都必须维护一个「序列号」。所以当客户端发送携带「初始序列号」的 SYN 报文的时候，需要服务端回一个 ACK 应答报文，表示客户端的 SYN 报文已被服务端成功接收；那当服务端发送「初始序列号」给客户端的时候，依然也要得到客户端的应答回应，**这样一来一回，才能确保双方的初始序列号能被可靠的同步。**

*避免资源浪费*

两次握手的前提下，如果客户端发送的 SYN 报文在网络中阻塞了，重复发送多次SYN报文，那么服务端在收到请求后就会**建立多个冗余的无效连接，造成不必要的资源浪费。**



不需要四次握手的原因？

三次握手在理论上可以建立可靠的连接，所以不需要使用更多的通信次数。

### 3. 序列号的作用？

1. **确保数据传输的有序性**：初始序列号为每个连接的第一个数据包分配一个唯一的序列号，然后后续的数据包基于此序列号递增。这样，接收方可以根据序列号来排序和重组数据包，确保数据的有序性，
2. **丢包重传**：当数据包在传输过程中丢失时，**接收方**可以通过序列号检测到缺失的数据包，并通知发送方进行重传。发送方则会根据序列号再次发送丢失的数据包。通过初始序列号和递增的序列号，TCP确保所有数据包都能准确无误地传送到目的地。
3. **避免旧连接干扰**：通过同步初始序列号的机制，防止旧连接干扰当前连接去传输数据包
4. **保证唯一性**：即使两个连接之间的IP地址和端口号相同，不同的初始序列号也能将它们区分开，确保数据不会混淆在不同的连接之间。

### 4. (高频) 四次挥手的内容？

1. **第一次挥手**：客户端打算关闭连接，发送一个`FIN(SEQ=x)`标志的数据包->服务端，用来关闭客户端到服务端的数据传送。然后客户端进入`FIN-WAIT-1`状态。
2. **第二次挥手**：服务端收到这个`FIN(SEQ=X)`标志的数据包，它发送一个`ACK(ACK=x+1)`标志的数据包->客户端 ，服务端进入`CLOSE-WAIT`状态。客户端收到服务端`ACK`应答报文后，客户端进入`FIN-WAIT-2`状态。
3. **第三次挥手**：服务端处理完数据过后，再次发送一个`FIN(SEQ=y)`标志的数据包->客户端，请求关闭连接，然后服务端进入`LAST-ACK`状态。
4. **第四次挥手**：客户端收到服务端的`FIN`数据包后回一个`ACK(ACK=y+1)`标志的数据包->服务端，然后客户端进入`TIME-WAIT`状态。服务端在收到`ACK(ACK=y+1)`标志的数据包后进入`CLOSE`状态。此时如果客户端等待`2MSL`后依然没有收到回复，就证明服务端已正常关闭，随后客户端也可以关闭连接了。

MSL指的是TCP段在网络中能存活的最长时间。	

### 5. (高频) 为什么需要四次挥手？

关闭连接时，客户端向服务端发送FIN 时，仅仅表示客户端不再发送数据了但是还能接收数据。

服务端收到客户端的 FIN 报文时，先回一个 ACK 应答报文，而服务端可能还有数据需要处理和发送，等服务端不再发送数据时，才发送 FIN 报文给客户端来表示同意现在关闭连接。所以服务端的 ACK 和 FIN 需要分开发送，因此是四次挥手。

### 6. 如果已经建立了TCP连接，但是客户端突然出现故障了怎么办？

为了应对这种情况，TCP使用了一种**保活机制**，通过在一个时间段内从服务端给客户端发送多个保活的探测报文，如果连续多个报文都没得到响应，可以认定TCP已经死亡，服务端从而关闭连接。

### 7. 如果已经建立了TCP连接，但是服务端崩溃了怎么办？

TCP 的连接信息是由内核维护的，所以当服务端的进程崩溃后，内核需要回收该进程的所有 TCP 连接资源，于是内核会发送第一次挥手 FIN 报文，后续的挥手过程也都是在内核完成，并不需要进程的参与，所以即使服务端的进程退出了，还是能与客户端完成 TCP 四次挥手的过程。



### 8. TCP 连接过程中把网卡拔了会发生什么？超时断开的话可能会等待很久，有没有更快断开的方法？

### 9. (高频) TCP与UDP的区别及使⽤场景？

1. *是否面向连接*
   TCP 提供面向连接，**在传送数据之前必须先建立连接**，数据传送结束后要释放连接。
   UDP 在传送数据之前不需要先建立连接。
2. *是否是可靠传输*
   TCP 提供可靠的传输服务，TCP 在传递数据之前，会有三次握手来建立连接，而且在数据传递时，窗口、重传、拥塞控制机制；通过 TCP 连接传输的数据保证无差错、不丢失、不重复、并且按序到达。
   远地主机在收到 UDP 报文后，不需要给出任何确认，并且不保证数据不丢失，不保证是否顺序到达。
3. *是否有状态*
   TCP 传输是有状态的，TCP 需要维护复杂的连接状态表，数据包发送后会引起状态改变。
   UDP 是无状态服务
4. *传输形式*
   TCP 是面向字节流的
   UDP 是面向报文的
5. *传输效率***
   **由于使用 TCP 进行传输的时候多了连接、确认、重传等机制，所以 TCP 的传输效率要比 UDP 低很多。因此 TCP 的场景一般是短信聊天，UDP 是视频通话。
6. *是否广播
   *因为 TCP 是面向连接和可靠传输的，不适合广播。UDP 支持广播，可以在网络中发送数据到多个节点

### 10. 使用TCP的缺点？

1. 升级TCP工作很困难
2. TCP建立连接的延迟
3. TCP存在队头阻塞问题
4. 网络迁移需要重新建立TCP连接

### 11. 为什么DNS协议使用UDP？只使用了UDP吗？

### 12. TCP 超时重传？

当发送方发送一个数据段后，会启动一个定时器并等待接收方的确认。如果在定时器到期前没有收到确认（ACK），TCP 发送方会认为数据段可能丢失，于是重新发送该数据段。这一过程称为超时重传。

### 13. 如何实现流量控制？

TCP流量控制通过**滑动窗口机制**实现，流量控制是为了控制发送方的发送速率，保证接收方来得及接收。接收方根据其缓冲区的剩余空间大小，在发送的确认报文中的窗口字段可以用来控制发送方窗口大小，从而影响发送方的发送速率。将窗口字段设置为0，则发送方不能发送数据，用这种方式保证数据传输的效率和可靠性。

### 14. (中高频) 什么是网络拥塞？如何实现拥塞控制？

「发送方」没有在规定的时间内收到ACK应答报文，发生了**超时重传**，就会认为网络出现了拥塞。

TCP拥塞控制的目的既要通过**调整数据传输速率**来防止网络拥塞，又要提高网络吞吐量，即在不引发拥塞的情况下尽可能多地传输数据。它包含四个主要算法：

1. **慢启动**：刚开始发送少量数据，从小到大以2的倍数逐步增大拥塞窗口数值，直到发现网络拥塞迹象。	
2. **拥塞避免**：在接近网络容量时，让拥塞窗口缓慢增大，每经过一个往返时间RRT把发送方拥塞窗口数值加一
3. **快速重传**：网络慢慢出现拥塞，检测到数据丢失后，立即重传丢失的数据包。
4. **快速恢复**：在快速重传后，避免完全重置发送速率，维持一定的传输速度。

### 15. 使用TCP的协议有哪些？使用UDP的协议有哪些？

1. HTTP 协议：用于在 Web 浏览器和 Web 服务器之间传输网页和其他资源。
2. FTP 协议：用于在网络上进行文件传输，支持文件上传和下载。
3. SMTP 协议：用于电子邮件传输：负责在邮件服务器之间发送邮件
4. MQTT 协议：一种轻量级的发布/订阅消息的传输协议

------

## 三、UDP

### 1. UDP如何实现可靠传输？



------

## 四、HTTP

### 1. (中高频) 什么是HTTP协议？HTTP状态码有哪些？

HTTP是超文本传输协议。

![img](https://cdn.nlark.com/yuque/0/2024/png/42782944/1711928021100-9107545e-ff00-4ef6-bd3c-a9de3cb15b51.png)

`200`表示成功，服务器已成功处理了请求

`301`表示永久重定向，说明请求的资源已经不存在了，需要改用新的URL继续访问

**4XX：客户端错误**

`400`表示客户端请求的报文有错误

`403`表示服务器禁止访问资源，一般因为权限不足

`404`代表服务器无法正常提供消息，或是服务器无法回应且原因不明

**5XX：服务器错误**

`500`服务器错误

### 2. (中高频) 什么是强缓存和协商缓存？

强制缓存指的是浏览器判断缓存没有过期，直接使用浏览器的**本地缓存**

协商缓存指的是与服务端协商后，通过协商的结果判断是否使用**本地缓存**

### 3. (中高频) HTTP 请求报文和响应报文是怎样的？

![img](https://cdn.nlark.com/yuque/0/2024/png/42782944/1724648271625-c565a4c3-d17c-4cff-a158-14d69e716b0d.png)

### 4. 一个 URL 包含哪些部分？

![img](https://cdn.nlark.com/yuque/0/2024/png/42782944/1723774923165-7e3c2ae8-ac4f-44cd-9bbf-a1f5596ad3b8.png)

### 5. (高频) 从输入URL到页面展示到底发生了什么？（一次完整的HTTP请求经过的步骤？）

链路：DNS -> ip+端口号 -> TCP -> HTTP请求与响应 -> 关闭连接

1. 浏览器通过DNS协议，获取域名对应的IP地址。
2. 浏览器根据 IP 地址和端口号，向目标服务器发起一个TCP 连接请求。
3. 浏览器在 TCP 连接上，向服务器发送一个 HTTP 请求报文，请求获取网页的内容。
4. 服务器收到 HTTP 请求报文后处理请求，并返回 HTTP 响应报文给浏览器。
5. 浏览器收到 HTTP 响应报文后，解析响应体中的 HTML 代码，渲染网页的结构和样式，同时根据 HTML 中的其他资源的 URL（如图片、CSS、JS 等），再次发起 HTTP 请求，获取这些资源的内容，直到网页完全加载显示。
6. 浏览器在不需要和服务器通信时，可以主动关闭 TCP 连接，或者等待服务器的关闭请求。

### 6. HTTP为什么是无状态的？

每个HTTP请求都是独立的，与之前的请求没有任何关联，服务端不会保存客户端的状态信息。

### 7. (中高频)HTTP的Keep-Alive是什么？TCP 的 Keep-Alive和 HTTP 的是一个东西吗？

### 8. (高频) HTTP和HTTPS有什么区别？

阐述区别、他有我没有

1. HTTP是超文本传输协议，信息是「明文传输」，存在安全风险的问题；
   HTTPS在TCP和HTTP网络层之间加入了SSL/TLS安全协议，使得报文能够加密传输。
2. HTTP连接建立相对简单，TCP三次握手之后便可进行HTTP的报文传输。**简单**
   HTTPS在TCP三次握手之后，还需进行SSL/TLS的握手过程，才可进入**加密报文**传输。**复杂**
3. 两者的默认端口不一样，HTTP默认端口号是80，HTTPS默认端口号是443。
4. HTTPS协议需要向CA（证书权威机构）申请数字证书，来保证服务器的身份是可信的。

### 9. (高频)HTTP/1.1和HTTP/2.0有什么区别？

1. **多路复用
   **HTTP/1.1 则使用串行方式，每个请求和响应都需要独立的连接，而浏览器为了控制资源会有 6-8 个 TCP 连接都限制。
   HTTP/2.0 在同一连接上可以同时传输多个请求和响应（可以看作是 HTTP/1.1 中长链接的升级版本），互不干扰；这使得 HTTP/2.0 在处理多个请求时更加高效，减少了网络延迟和提高了性能。
2. 二进制帧
   而 HTTP/1.1 则使用文本格式的报文。
   HTTP/2.0 使用二进制帧进行数据传输，二进制帧更加紧凑和高效，减少了传输的数据量和带宽消耗。
3. **头部压缩
   **HTTP/1.1 支持Body压缩，Header不支持压缩。
   HTTP/2.0 支持对Header压缩，使用了专门为Header压缩而设计的 HPACK 算法，减少了网络开销。
4. **服务器推送
   **而 HTTP/1.1 需要客户端自己发送请求来获取相关资源。
   HTTP/2.0 支持服务器推送，可以在客户端请求一个资源时，将其他相关资源一并推送给客户端，从而减少了客户端的请求次数和延迟。

### 10. (中高频)HTTP/2.0和HTTP/3.0有什么区别？

1. **传输协议**
   HTTP/2.0 是基于 TCP 协议实现的，HTTP/3.0 新增了 QUIC（Quick UDP Internet Connections） 协议来实现可靠的传输，提供与 TLS/SSL 相当的安全性，具有较低的连接和传输延迟。你可以将 QUIC 看作是 UDP 的升级版本，在其基础上新增了很多功能比如加密、重传等等。HTTP/3.0 之前名为 HTTP-over-QUIC，从这个名字中我们也可以发现，HTTP/3 最大的改造就是使用了 QUIC。
2. **连接建立**：HTTP/2.0 需要经过经典的 TCP 三次握手过程（由于安全的 HTTPS 连接建立还需要 TLS 握手，共需要大约 3 个 RTT）。由于 QUIC 协议的特性（TLS 1.3，TLS 1.3 除了支持 1 个 RTT 的握手，还支持 0 个 RTT 的握手）连接建立仅需 0-RTT 或者 1-RTT。这意味着 QUIC 在最佳情况下不需要任何的额外往返时间就可以建立新连接。
3. **队头阻塞**：HTTP/2.0 多请求复用一个 TCP 连接，一旦发生丢包，就会阻塞住所有的 HTTP 请求。由于 QUIC 协议的特性，HTTP/3.0 在一定程度上解决了队头阻塞（Head-of-Line blocking, 简写：HOL blocking）问题，一个连接建立多个不同的数据流，这些数据流之间独立互不影响，某个数据流发生丢包了，其数据流不受影响（本质上是多路复用+轮询）。

### 11. Http下载一个比较大的文件，刚开始下载比较慢，后来速度会越来越快为什么？（拥塞控制）

### 12. Http协议为什么用TCP而不用UDP？

主要在于 HTTP 协议的设计目标以及它与 TCP 协议的特性匹配

1. Http是一种请求-响应模型模式的协议，需要客户端与服务端之间建立连接，请求并接收响应
2. Http协议传输的数据需要保证按序到达，而TCP会重新排序数据包，保证按序到达应用层
3. TCP有流量控制、拥塞控制等功能，确保Http在复杂网络下保持良好的传输性能

### 13. URI和URL的区别是什么?

*URI*

统一资源**标志符**，可以唯一标识一个资源。

*URL*

是统一资源**定位符**，URL不仅可以用来标识一个资源还可以提供该资源的路径。

### 14. (高频) GET 和 POST 的区别？

1. *语义*
   GET 通常用于从服务器获取或查询资源
   POST 语义是根据请求的 **payload** 对指定资源做出处理，所以通常用于创建或修改资源。
2. *幂等性
   *从 RFC 规范定义的语义来看：**
   **GET 请求是幂等的，无论操作多少次，服务器上的数据都是安全的，且每次的结果都是相同的；
   POST 请求不是幂等的，服务器上数据可能被修改，并且每次执行可能会产生不同的结果。
3. *参数格式*
   GET 请求的参数通常放在 URL 中，形成查询字符串，长度受到浏览器和服务器的限制；
   POST 请求的参数通常放在请求体（body）中，可以有多种编码格式，浏览器对body大小无限制。

ps：GET也可以有body请求体，POST也可以在URL中放请求参数

1. *缓存
   *因为GET方法是安全且幂等的，所以它可以被**浏览器**或**代理**（如Nginx）缓存起来，以提高性能和效率。
   POST请求因为是「新增或提交数据」的操作，会修改服务器上的资源，所以是**不安全**的，且多次提交数据就会创建多个资源，所以**不是幂等**的。所以浏览器一般不会缓存 POST 请求。

### 15. (中高频) HTTPS 工作原理？

### 16. (高频) HTTP/1.0和HTTP/1.1有什么区别？

1. *连接方式***
   **HTTP/1.0 为短连接；
   HTTP/1.1 支持长连接。HTTP 协议的长连接和短连接，实质上是 TCP 协议的长连接和短连接。
2. *支持管道网络传输
   *只要第一个请求发出去了，不必等其回来，就可以发第二个请求出去，可以减少整体的响应时间。

### 17. Https 能否抵御重放攻击？

### 18. Https客户端校验证书的细节？



------

## 五、WebSocket

### 1. 什么是Socket？

Socket 是计算机网络编程中的一个重要概念，它充当了应用程序和网络协议之间的接口。简单来说，Socket 是一个网络连接的终端点，通过它，两个设备之间可以进行数据传输。它可以基于不同的传输层协议，如 TCP 和 UDP

### 2. 什么是 WebSocket？一般用来做什么？

### 3. WebSocket 和 Http 有什么区别？

### 4. WebSocket 的工作过程？

### 5. SSE 与 WebSocket 的区别？

------

## 六、IP

### 1. IP 协议的作⽤是什么？



### 2. 什么是 IP 地址？IP 寻址如何⼯作？





### 3. IPv4和IPv6有什么区别？



### 4. ping命令是什么协议？

ping命令使用的是ICMP协议，ping常用于：

1. **检查网络连接**：判断本地主机与目标主机之间是否能连通。
2. **测量网络延迟**：显示从本地主机到目标主机的响应时间。
3. **检查网络的包丢失情况**：通过多次 ping 测试查看丢包率。

------

## 七、DNS

### 1. DNS是什么？解决了什么问题？

是什么？作用？

DNS又叫做域名管理系统，主要解决的是域名和IP地址的映射问题。

### 2. DNS能解析端口吗？





### 3. DNS服务器有哪些？

![img](https://cdn.nlark.com/yuque/0/2024/png/42782944/1724715937277-fbe99146-0a51-488f-a9e9-b0c43190935f.png)

### 4. (中高频) DNS解析的过程是什么样的？



### 5. DNS劫持了解吗？如何应对？

### 6. (中高频) CDN是什么？